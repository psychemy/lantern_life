<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Christmas Recovery Resilience Retreat - Lantern</title><meta name="description" content="Strengthen your defences and escape to Devon for a four-day Recovery Resilience Retreat. An intensive retreat to support abstinence and sobriety ."><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://lanternlife.co.uk/christmas-recovery-resilience-retreat/"><link rel="alternate" type="application/atom+xml" href="https://lanternlife.co.uk/feed.xml"><link rel="alternate" type="application/json" href="https://lanternlife.co.uk/feed.json"><link rel="shortcut icon" href="https://lanternlife.co.uk/media/website/favicon.ico" type="image/x-icon"><style>h1,h2,h3,h4,h5,h6,blockquote,.logo,.navbar__menu,.footer{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}body,.btn,[type=button],[type=submit],button{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}</style><link rel="stylesheet" href="https://lanternlife.co.uk/assets/css/style.css?v=42a952cb4e67bfc69257d5584df5bc60"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://lanternlife.co.uk/christmas-recovery-resilience-retreat/"},"headline":"Christmas Recovery Resilience Retreat","datePublished":"2024-08-06T14:32","dateModified":"2024-08-13T12:16","image":{"@type":"ImageObject","url":"https://lanternlife.co.uk/media/website/lanternlife_logo_outlined-pink.png","height":236,"width":1063},"description":"Strengthen your defences and escape to Devon for a four-day Recovery Resilience Retreat. An intensive retreat to support abstinence and sobriety .","author":{"@type":"Person","name":"Lantern Ltd.","url":"https://lanternlife.co.uk/authors/lantern-ltd/"},"publisher":{"@type":"Organization","name":"Lantern Ltd.","logo":{"@type":"ImageObject","url":"https://lanternlife.co.uk/media/website/lanternlife_logo_outlined-pink.png","height":236,"width":1063}}}</script><meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"><meta http-equiv="Pragma" content="no-cache"><meta http-equiv="Expires" content="0"><script type="text/javascript">function newsletterBtn() {
    var element = document.getElementById("popup");
    element.classList.add("is-visible");
  }</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZYTPP115TE"></script><script>window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-ZYTPP115TE');</script><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet"></head><body><header class="header header--narrow header--flat-no-hero" id="js-header"><div><a class="logo" href="https://lanternlife.co.uk/"><img src="https://lanternlife.co.uk/media/website/lanternlife_logo_outlined-pink.png" alt="Lantern"></a><nav class="navbar"><button class="navbar__toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul id="js-navbar-menu" class="navbar__menu"><li class="has-submenu"><a href="https://lanternlife.co.uk/training/" target="_self" aria-haspopup="true">Training</a><ul class="navbar__submenu level-2" aria-hidden="true"><li><a href="https://lanternlife.co.uk/training/" target="_self">Overview</a></li><li class="has-submenu"><a href="https://lanternlife.co.uk/workshops/" target="_self" aria-haspopup="true">Workshops</a><ul class="navbar__submenu level-3" aria-hidden="true"><li><a href="https://lanternlife.co.uk/anxiety/" target="_self">Anxiety</a></li><li><a href="https://lanternlife.co.uk/bounderies/" target="_self">Boundaries</a></li><li><a href="https://lanternlife.co.uk/intuition/" target="_self">Intuition</a></li><li><a href="https://lanternlife.co.uk/mindfulness/" target="_self">Mindfulness</a></li><li><a href="https://lanternlife.co.uk/resilience/" target="_self">Resilience</a></li><li><a href="https://lanternlife.co.uk/self-care/" target="_self">Self Care</a></li><li><a href="https://lanternlife.co.uk/sleep/" target="_self">Sleep</a></li><li><a href="https://lanternlife.co.uk/stress/" target="_self">Stress</a></li></ul></li><li class="has-submenu"><a href="https://lanternlife.co.uk/specialist-training/" target="_self" aria-haspopup="true">Specialist Training</a><ul class="navbar__submenu level-3" aria-hidden="true"><li><a href="https://lanternlife.co.uk/anxiety-and-stress-management/" target="_self">Anxiety &amp; Stress Management</a></li><li><a href="https://lanternlife.co.uk/confidence-and-self-esteem/" target="_self">Confidence &amp; Self Esteem</a></li><li><a href="https://lanternlife.co.uk/domestic-violence-and-coercive-control/" target="_self">Domestic Violence &amp; Coercive Control</a></li><li><a href="https://lanternlife.co.uk/drug-and-alcohol/" target="_self">Drug &amp; Alcohol</a></li><li><a href="https://lanternlife.co.uk/gaming-and-social-media-dependency/" target="_self">Gaming &amp; Social Media Dependency</a></li><li><a href="https://lanternlife.co.uk/gender-specific-support/" target="_self">Gender Specific Support</a></li><li><a href="https://lanternlife.co.uk/trauma-informed-care/" target="_self">Trauma-Informed Care</a></li><li><a href="https://lanternlife.co.uk/vicarious-trauma/" target="_self">Vicarious Trauma</a></li></ul></li></ul></li><li><a href="https://lanternlife.co.uk/events/" target="_self">Events</a></li><li><a href="https://lanternlife.co.uk/retreats/" target="_self">Retreats</a></li><li><a href="https://lanternlife.co.uk/lounges/" target="_self">Lounges</a></li><li><a href="https://lanternlife.co.uk/mission-statement/" target="_self">Mission</a></li><li><a href="https://lanternlife.co.uk/contact-us/" target="_self">Contact Us</a></li></ul></nav></div></header><div class="main main--flat"><div class="wrapper"><article class="page page--flat page--flat-no-hero post"><div class="post__inner"><header class="post__header"><h1 class="post__title">Christmas Recovery Resilience Retreat</h1></header><div class="post__entry"><div class="playfair-display-retreats"><figure class="post__image post__image--wide"><img loading="lazy" src="https://lanternlife.co.uk/media/posts/44/resilience-top-3.png" alt="Wildflower Meadow" width="2400" height="900" sizes="(max-width: 1200px) 100vw, 1200px" srcset="https://lanternlife.co.uk/media/posts/44/responsive/resilience-top-3-xs.png 300w, https://lanternlife.co.uk/media/posts/44/responsive/resilience-top-3-sm.png 480w, https://lanternlife.co.uk/media/posts/44/responsive/resilience-top-3-md.png 749w, https://lanternlife.co.uk/media/posts/44/responsive/resilience-top-3-xl.png 1200w"></figure><h2 class="align-center" style="margin-bottom: 1em;">2nd - 5th December 2024</h2><p style="font-weight: 800;">The festive period is a magical time of year, but it is also a time of excess. Trying to maintain a sober or more moderate lifestyle can feel impossible! Have you been told your drinking or drug use is getting out of control? Has recreational turned dysfunctional and you‚Äôre not sure what to do about it? Perhaps you‚Äôve had years of sobriety but keep relapsing. Let us help you break the cycle.</p><figure class="post__image post__image--left"><img loading="lazy" src="https://lanternlife.co.uk/media/posts/44/Hawke-Barne-Wedding-Venue-8.jpg" alt="Hawk Manor" width="1080" height="757" sizes="(max-width: 1200px) 100vw, 1200px" srcset="https://lanternlife.co.uk/media/posts/44/responsive/Hawke-Barne-Wedding-Venue-8-xs.jpg 300w, https://lanternlife.co.uk/media/posts/44/responsive/Hawke-Barne-Wedding-Venue-8-sm.jpg 480w, https://lanternlife.co.uk/media/posts/44/responsive/Hawke-Barne-Wedding-Venue-8-md.jpg 749w, https://lanternlife.co.uk/media/posts/44/responsive/Hawke-Barne-Wedding-Venue-8-xl.jpg 1200w"></figure><p>Strengthen your defences and escape to Devon for a four-day Recovery Resilience Retreat. An intensive retreat to support abstinence, sobriety or help you to maintain a more moderate lifestyle during the festive season &amp; beyond.</p><p>Lantern‚Äôs Recovery Resilience Retreat is designed for individuals seeking to manage and overcome problematic alcohol and/or substance use. Over the 4-day recovery retreat you will immerse yourself in specialist psychotherapy sessions specifically designed to provide practical tools and strategies for lasting recovery. By the end of the retreat, you will have developed personalised action plans, and gained valuable skills to manage addictive or problematic behaviours.</p><p>Unmanaged alcohol and substance use is complex and whatever stage you are in your recovery journey the retreat will be able to offer the perfect springboard for you to take back control, step out of the shame and move forward into a happy and more fulfilling future. ¬†Invest in yourself and give yourself the best chance for success in 2025 by joining us for some intensive therapy for both your mind and body by releasing trauma past and present. Places are limited to seven per retreat, allowing you to feel safe and supported in an intimate setting.</p><p>By bringing together intensive group psychotherapy sessions with Somatic Yoga and Fire &amp; Ice therapy the Recovery Resilience Retreat is the only retreat of its kind currently available!</p><h3 class="align-center">Intensive Therapy Sessions</h3><figure class="post__image post__image--left"><img loading="lazy" src="https://lanternlife.co.uk/media/posts/44/hannah-busing-Zyx1bK9mqmA-unsplash.jpg" alt="" width="1920" height="1280" sizes="(max-width: 1200px) 100vw, 1200px" srcset="https://lanternlife.co.uk/media/posts/44/responsive/hannah-busing-Zyx1bK9mqmA-unsplash-xs.jpg 300w, https://lanternlife.co.uk/media/posts/44/responsive/hannah-busing-Zyx1bK9mqmA-unsplash-sm.jpg 480w, https://lanternlife.co.uk/media/posts/44/responsive/hannah-busing-Zyx1bK9mqmA-unsplash-md.jpg 749w, https://lanternlife.co.uk/media/posts/44/responsive/hannah-busing-Zyx1bK9mqmA-unsplash-xl.jpg 1200w"></figure><p>Janie our in-house psychotherapist, specialises in substance misuse and trauma recovery. ¬†prior to joining the retreat Janie will contact you to discuss your current level of use and where you are aiming to get to. Janie &amp; our team of specialist practitioners will provide you with a supportive space where you can focus on your recovery surrounded by like minded individuals.</p><figure class="post__image post__image--right"><img loading="lazy" src="https://lanternlife.co.uk/media/posts/44/mor-shani-V-BNenqS1ow-unsplash.jpg" alt="" width="1920" height="2880" sizes="(max-width: 1200px) 100vw, 1200px" srcset="https://lanternlife.co.uk/media/posts/44/responsive/mor-shani-V-BNenqS1ow-unsplash-xs.jpg 300w, https://lanternlife.co.uk/media/posts/44/responsive/mor-shani-V-BNenqS1ow-unsplash-sm.jpg 480w, https://lanternlife.co.uk/media/posts/44/responsive/mor-shani-V-BNenqS1ow-unsplash-md.jpg 749w, https://lanternlife.co.uk/media/posts/44/responsive/mor-shani-V-BNenqS1ow-unsplash-xl.jpg 1200w"></figure><h3 class="align-center">Yoga &amp; Recovery</h3><p>Do you use drugs or alcohol to self-medicate? Yoga supports the treatment &amp; recovery of trauma and addiction by restoring the disconnection that occurs due to substance abuse and traumatic events. Perhaps you use to avoid feeling difficult emotions or just to help you cope with a stressful lifestyle? Overtime you avoid processing emotions and so when you stop self-medicating it can feel very overwhelming and fill you with anxiety, dread and paranoia. Yoga reduces anxiety and research has shown that yoga has been an effective way of reducing and in some cases eliminating symptoms of PTSD and anxiety.</p><h3 class="align-center">‚ÄúFire &amp; Ice‚Äù Therapy</h3><p>Wim Hof has advocated the benefits of cold-water therapy for addiction recovery and rehab centres worldwide took notice and so did we!</p><figure class="post__image post__image--left"><img loading="lazy" src="https://lanternlife.co.uk/media/posts/44/huum-aCLk3GetkO0-unsplash.jpg" alt="" width="1920" height="1280" sizes="(max-width: 1200px) 100vw, 1200px" srcset="https://lanternlife.co.uk/media/posts/44/responsive/huum-aCLk3GetkO0-unsplash-xs.jpg 300w, https://lanternlife.co.uk/media/posts/44/responsive/huum-aCLk3GetkO0-unsplash-sm.jpg 480w, https://lanternlife.co.uk/media/posts/44/responsive/huum-aCLk3GetkO0-unsplash-md.jpg 749w, https://lanternlife.co.uk/media/posts/44/responsive/huum-aCLk3GetkO0-unsplash-xl.jpg 1200w"></figure>At the Recovery Resilience Retreat we have taken this to the next le&lt;a href="tel:+44 1903 953766"&gt;&lt;img src="https://lanternlife.co.uk/media/files/phone.png" alt="telephone icon" width="36" height="36"&gt;&lt;/a&gt;vel, by combining thermalist therapy, cold-water therapy and breath work. You will be guided through your sessions by Sara, the only combined Wim Hoff and thermalist therapy qualified practitioner globally. Merging cold water, the warmth of the sauna and deep breath work, your body will efficiently burn off cortisol (the stress chemical your body produces) reducing stress and anxiety, leaving your mind clearer, your body revitalised and emotionally stronger and empowered.<p></p><figure class="post__image post__image--right"><img loading="lazy" src="https://lanternlife.co.uk/media/posts/44/d3f3c9af-9f09-4bfd-b08c-7bb7f3fed16e.jpeg" alt="" width="1600" height="1200" sizes="(max-width: 1200px) 100vw, 1200px" srcset="https://lanternlife.co.uk/media/posts/44/responsive/d3f3c9af-9f09-4bfd-b08c-7bb7f3fed16e-xs.jpeg 300w, https://lanternlife.co.uk/media/posts/44/responsive/d3f3c9af-9f09-4bfd-b08c-7bb7f3fed16e-sm.jpeg 480w, https://lanternlife.co.uk/media/posts/44/responsive/d3f3c9af-9f09-4bfd-b08c-7bb7f3fed16e-md.jpeg 749w, https://lanternlife.co.uk/media/posts/44/responsive/d3f3c9af-9f09-4bfd-b08c-7bb7f3fed16e-xl.jpeg 1200w"></figure><p>The retreat is not a rehab or detox programme, rather a safe space where you can learn &amp; heal surrounded by the beautiful Devonshire countryside. The retreat offers hot tubs, a sauna, fire pit &amp; peaceful places for reflection. Enjoy the stunning rural location and nature. Dine on local, nutritious meals, freshly prepared by our professional catering team. The accommodation comprises of luxury, private double bedrooms in either a 16 century barn conversion or within the west wing of the manor house.</p><figure class="post__image post__image--wide"><img loading="lazy" src="https://lanternlife.co.uk/media/posts/44/accomodation.jpg" alt="Accomodation" width="1150" height="300" sizes="(max-width: 1200px) 100vw, 1200px" srcset="https://lanternlife.co.uk/media/posts/44/responsive/accomodation-xs.jpg 300w, https://lanternlife.co.uk/media/posts/44/responsive/accomodation-sm.jpg 480w, https://lanternlife.co.uk/media/posts/44/responsive/accomodation-md.jpg 749w, https://lanternlife.co.uk/media/posts/44/responsive/accomodation-xl.jpg 1200w"></figure><p style="font-weight: 800; font-family: sans-serif; text-align: center;">If you have any questions about this retreat please call us on <a href="href=" tel:="" 44="" 1903="" 953766="">01903 953766</a><br>or <a href="https://lanternlife.co.uk/contact-us/">contact us</a> and a member of the team will be happy to help.</p><div class="resilience"><p style="padding: 2em 2em 0 2em; margin-top: 4em; font-size: 1.25em; font-style: italic; text-align: center; color: #bf598c;">"Join us on this transformative journey to reclaim control and build a healthier, more fulfilling life."</p><p class="align-center" style="font-family: sans-serif; padding-bottom: 2em; margin-top: 1.25em;"><a href="https://buy.stripe.com/eVa3eNaet9BH1Nu4gg" class="btn">Book your place now!<br><span style="font-size: 2em;">¬£1600.00*</span><br>per person</a></p></div><p class="align-center" style="font-family: sans-serif; padding: 2em 1em 2em 1em;">*Accommodation, all meals, psychotherapy groups and all retreat activities (unless otherwise stated) included.<br>**Booking payment means you confirm your acceptance of our <a href="https://lanternlife.co.uk/terms-and-conditions/">terms &amp; conditions.</a></p><p style="font-size: 1.25em; font-family: sans-serif; text-align: center; margin-top: 1em;">Full Information pack available here <a href="https://drive.google.com/file/d/1_ssgSpX5FmD9bVmoVwRgIJh1yH8GTDvs/view">üí¨</a></p></div></div><footer></footer></div></article></div></div><footer class="footer"><div class="wrapper"><a class="footer__logo" href="https://lanternlife.co.uk/"><img src="https://lanternlife.co.uk/media/website/lanternlife_logo_outlined-pink.png" alt="Lantern"></a><div class="footer__copy"><div class="flex-grid"><div class="col"><a class="btn" href="https://lanternlife.co.uk/contact-us" target="_self" rel="nofollow noopener" style="width:100%;">Contact Us</a></div><div class="col"><a href="tel:+44 1903 953766"><img src="https://lanternlife.co.uk/media/files/phone.png" alt="telephone icon" width="36" height="36"></a><a href="https://www.instagram.com/lantern.life/" target="_blank" rel="nofollow noopener"><img class="footicon" src="https://lanternlife.co.uk/media/files/instagram.png" alt="instagram icon" width="36" height="36"></a><a href="https://www.linkedin.com/company/lanternlife" target="_blank" rel="nofollow noopener"><img class="footicon" src="https://lanternlife.co.uk/media/files/linked.png" alt="linkedin icon" width="36" height="36"></a></div><div class="col"><input style="width:100%;" class="newsletter-popup__submit btn" type="submit" name="subscribe" value="Subscribe to our Newsletter" onclick="newsletterBtn();"></div></div><p><small>Registered address: Lantern Life Ltd. Holme Manor Cottage, Pulborough, RH20 2DS, UK. Company Number: 12758396<br><a href="#cookie-settings">Cookie preferences</a> | <a href="https://lanternlife.co.uk/cookie-policy" target="_self" rel="nofollow noopener">Cookie policy</a> | <a href="https://lanternlife.co.uk/privacy-policy" target="_self" rel="nofollow noopener">Privacy policy</a></small></p><p style="font-size:0.6rem;">Design by <a href="https://psychemy.uk" target="_blank" rel="nofollow noopener">Psychemy</a> - Powered by <a href="https://getpublii.com/" target="_blank" rel="nofollow noopener">Publli</a></p></div></div><button class="footer__bttop js-footer__bttop" aria-label="Back to top"><svg><title>Back to top</title><use xlink:href="https://lanternlife.co.uk/assets/svg/svg-map.svg#toparrow"/></svg></button></footer><div class="newsletter-popup" id="popup" data-show-after-time="10000ms"><button class="btn white newsletter-popup__close">&times;</button><h3>Subscribe to our newsletter</h3><p>Get the latest news, updates and more delivered directly to your inbox</p><form action="https://formsubmit.co/19b3d4563fe8f8b0467627b4c489676d" method="POST"><input name="_template" type="hidden" value="table"><input name="_captcha" type="hidden" value="false"><input name="_next" type="hidden" value="https://lanternlife.co.uk/newsletter"><input name="_subject" type="hidden" value="New Newsletter Subscription!"><input type="text" name="_honey" style="display:none"><p><input name="name" required="" type="text" placeholder="Name"></p><p><input name="email" required="" type="email" placeholder="Email Address"></p><p><input id="send_newsletter" name="send_newsletter" type="checkbox" value="yes" checked="checked"> <label for="send_newsletter">Subscribe to the Lantern Newsletter</label></p><p><button class="newsletter-popup__submit" type="submit">Submit</button></p></form><p style="font-size:0.66rem;">On clicking you agree to the terms of our <a href="https://lanternlife.co.uk/privacy-policy/">Privacy Policy</a>.</p></div><script>window.publiiThemeMenuConfig={mobileMenuMode:'sidebar',animationSpeed:300,submenuWidth:'auto',doubleClickTime:500,mobileMenuExpandableSubmenus:true,relatedContainerForOverlayMenuSelector:'#js-header',};</script><script defer="defer" src="https://lanternlife.co.uk/assets/js/scripts.min.js?v=71dff89e4102228e0bd70b61512af028"></script><script>/*<![CDATA[*/var images=document.querySelectorAll("img[loading]");for(var i=0;i<images.length;i++){if(images[i].complete){images[i].classList.add("is-loaded")}else{images[i].addEventListener("load",function(){this.classList.add("is-loaded")},false)}};/*]]>*/</script><script defer="defer" src="https://lanternlife.co.uk/assets/js/quicklink.umd.js?v=67961e8e006c47b24dedc624be0692ce"></script><script>window.addEventListener('load', () =>{quicklink();});</script><div class="pcb" data-behaviour="link" data-behaviour-link="#cookie-settings" data-revision="1" data-config-ttl="90" data-debug-mode="false"><div role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="pcb-title" aria-describedby="pcb-txt" class="pcb__banner"><div class="pcb__inner"><div id="pcb-title" role="heading" aria-level="2" class="pcb__title">This website uses cookies</div><div id="pcb-txt" class="pcb__txt">Select which cookies to opt-in to via the check-boxes below; our website uses cookies to examine site traffic and user activity while on our site. <a href="#not-specified">More details...</a></div><div class="pcb__buttons"><button type="button" class="pcb__btn pcb__btn--link pcb__btn--configure" aria-haspopup="dialog">Manage preferences</button> <button type="button" class="pcb__btn pcb__btn--solid pcb__btn--accept">Save Preferences</button></div></div></div><div class="pcb__popup" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="pcb-popup-title"><div class="pcb__popup__wrapper"><div class="pcb__inner pcb__popup__inner"><div class="pcb__popup__heading"><div id="pcb-popup-title" role="heading" aria-level="2" class="pcb__title">Cookie settings</div><button class="pcb__popup__close" aria-label="Close"></button></div><div class="pcb__popup__content"><div class="pcb__txt pcb__popup__txt">We use cookies to enhance your browsing experience, serve personalized ads or content, and analyze our traffic. By clicking "Accept All", you consent to our use of cookies. <a href="#not-specified">More details...</a></div><ul class="pcb__groups"><li class="pcb__group"><details><summary class="pcb__group__title no-desc">Required</summary></details><div class="pcb__popup__switch is-checked"><input type="checkbox" data-group-name="" id="pcb-group-0" checked="checked"> <label for="pcb-group-0">Required</label></div></li><li class="pcb__group"><details><summary class="pcb__group__title no-desc">Functionality</summary></details><div class="pcb__popup__switch"><input type="checkbox" data-group-name="functions" id="functions-cookies"> <label for="functions-cookies">Functionality</label></div></li><li class="pcb__group"><details><summary class="pcb__group__title no-desc">Analytical</summary></details><div class="pcb__popup__switch"><input type="checkbox" data-group-name="analytics" id="analytics-cookies"> <label for="analytics-cookies">Analytical</label></div></li></ul></div><div class="pcb__buttons pcb__popup__buttons"><button type="button" class="pcb__btn pcb__btn--solid pcb__btn--accept">Accept all</button> <button type="button" class="pcb__btn pcb__btn--reject">Reject all</button> <button type="button" class="pcb__btn pcb__btn--save">Save settings</button></div></div></div></div><div class="pcb__overlay" aria-hidden="true"></div></div><script>(function(win) {
    if (!document.querySelector('.pcb')) {
        return;
    }

    var cbConfig = {
        behaviour: document.querySelector('.pcb').getAttribute('data-behaviour'),
        behaviourLink: document.querySelector('.pcb').getAttribute('data-behaviour-link'),
        revision: document.querySelector('.pcb').getAttribute('data-revision'),
        configTTL: parseInt(document.querySelector('.pcb').getAttribute('data-config-ttl'), 10),
        debugMode: document.querySelector('.pcb').getAttribute('data-debug-mode') === 'true',
        initialState: null,
        initialLsState: null,
        previouslyAccepted: []
    };

    var cbUI = {
        wrapper: document.querySelector('.pcb'),
        banner: {
            element: null,
            btnAccept: null,
            btnReject: null,
            btnConfigure: null
        },
        popup: {
            element: null,
            btnClose: null,
            btnSave: null,
            btnAccept: null,
            btnReject: null,
            checkboxes: null,
        },
        overlay: null,
        badge: null,
        blockedScripts: document.querySelectorAll('script[type^="gdpr-blocker/"]'),
        triggerLinks: cbConfig.behaviourLink ? document.querySelectorAll('a[href*="' + cbConfig.behaviourLink + '"]') : null
    };

    function initUI () {
        // setup banner elements
        cbUI.banner.element = cbUI.wrapper.querySelector('.pcb__banner');
        cbUI.banner.btnAccept = cbUI.banner.element.querySelector('.pcb__btn--accept');
        cbUI.banner.btnReject = cbUI.banner.element.querySelector('.pcb__btn--reject');
        cbUI.banner.btnConfigure = cbUI.banner.element.querySelector('.pcb__btn--configure');

        // setup popup elements
        if (cbUI.wrapper.querySelector('.pcb__popup')) {
            cbUI.popup.element = cbUI.wrapper.querySelector('.pcb__popup');
            cbUI.popup.btnClose = cbUI.wrapper.querySelector('.pcb__popup__close');
            cbUI.popup.btnSave = cbUI.popup.element.querySelector('.pcb__btn--save');
            cbUI.popup.btnAccept = cbUI.popup.element.querySelector('.pcb__btn--accept');
            cbUI.popup.btnReject = cbUI.popup.element.querySelector('.pcb__btn--reject');
            cbUI.popup.checkboxes = cbUI.popup.element.querySelector('input[type="checkbox"]');
            // setup overlay
            cbUI.overlay = cbUI.wrapper.querySelector('.pcb__overlay');
        }

        cbUI.badge = cbUI.wrapper.querySelector('.pcb__badge');

        if (cbConfig.behaviour.indexOf('link') > -1) {
            for (var i = 0; i < cbUI.triggerLinks.length; i++) {
                cbUI.triggerLinks[i].addEventListener('click', function(e) {
                    e.preventDefault();
                    showBannerOrPopup();
                });
            }
        }
    }

    function initState () {
        var lsKeyName = getConfigName();
        var currentConfig = localStorage.getItem(lsKeyName);
        var configIsFresh = checkIfConfigIsFresh();

        if (!configIsFresh || currentConfig === null) {
            if (cbConfig.debugMode) {
                console.log('üç™ Config not found, or configuration expired');
            }

            if (window.publiiCBGCM) {
                gtag('consent', 'default', {
                    'ad_storage': window.publiiCBGCM.defaultState.ad_storage ? 'granted' : 'denied',
                    'ad_personalization': window.publiiCBGCM.defaultState.ad_personalization ? 'granted' : 'denied',
                    'ad_user_data': window.publiiCBGCM.defaultState.ad_user_data ? 'granted' : 'denied',
                    'analytics_storage': window.publiiCBGCM.defaultState.analytics_storage ? 'granted' : 'denied',
                    'personalization_storage': window.publiiCBGCM.defaultState.personalization_storage ? 'granted' : 'denied',
                    'functionality_storage': window.publiiCBGCM.defaultState.functionality_storage ? 'granted' : 'denied',
                    'security_storage': window.publiiCBGCM.defaultState.security_storage ? 'granted' : 'denied'
                });  
                
                if (cbConfig.debugMode) {
                    console.log('üç™ GCMv2 DEFAULT STATE: ' + JSON.stringify({
                        'ad_storage': window.publiiCBGCM.defaultState.ad_storage ? 'granted' : 'denied',
                        'ad_personalization': window.publiiCBGCM.defaultState.ad_personalization ? 'granted' : 'denied',
                        'ad_user_data': window.publiiCBGCM.defaultState.ad_user_data ? 'granted' : 'denied',
                        'analytics_storage': window.publiiCBGCM.defaultState.analytics_storage ? 'granted' : 'denied',
                        'personalization_storage': window.publiiCBGCM.defaultState.personalization_storage ? 'granted' : 'denied',
                        'functionality_storage': window.publiiCBGCM.defaultState.functionality_storage ? 'granted' : 'denied',
                        'security_storage': window.publiiCBGCM.defaultState.security_storage ? 'granted' : 'denied'
                    }));
                }
            }

            showBanner();
        } else if (typeof currentConfig === 'string') {
            if (cbConfig.debugMode) {
                console.log('üç™ Config founded');
            }

            cbConfig.initialLsState = currentConfig.split(',');

            if (window.publiiCBGCM) {
                gtag('consent', 'default', {
                    'ad_storage': getDefaultConsentState(currentConfig, 'ad_storage'),
                    'ad_personalization': getDefaultConsentState(currentConfig, 'ad_personalization'),
                    'ad_user_data': getDefaultConsentState(currentConfig, 'ad_user_data'),
                    'analytics_storage': getDefaultConsentState(currentConfig, 'analytics_storage'),
                    'personalization_storage': getDefaultConsentState(currentConfig, 'personalization_storage'),
                    'functionality_storage': getDefaultConsentState(currentConfig, 'functionality_storage'),
                    'security_storage': getDefaultConsentState(currentConfig, 'security_storage')
                });
                
                if (cbConfig.debugMode) {
                    console.log('üç™ GCMv2 DEFAULT STATE: ' + JSON.stringify({
                        'ad_storage': getDefaultConsentState(currentConfig, 'ad_storage'),
                        'ad_personalization': getDefaultConsentState(currentConfig, 'ad_personalization'),
                        'ad_user_data': getDefaultConsentState(currentConfig, 'ad_user_data'),
                        'analytics_storage': getDefaultConsentState(currentConfig, 'analytics_storage'),
                        'personalization_storage': getDefaultConsentState(currentConfig, 'personalization_storage'),
                        'functionality_storage': getDefaultConsentState(currentConfig, 'functionality_storage'),
                        'security_storage': getDefaultConsentState(currentConfig, 'security_storage')
                    }));
                }
            }

            showBadge();

            if (cbUI.popup.element) {
                var allowedGroups = currentConfig.split(',');
                var checkedCheckboxes = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');

                for (var j = 0; j < checkedCheckboxes.length; j++) {
                    var name = checkedCheckboxes[j].getAttribute('data-group-name');

                    if (name && name !== '-' && allowedGroups.indexOf(name) === -1) {
                        checkedCheckboxes[j].checked = false;
                    }
                }

                for (var i = 0; i < allowedGroups.length; i++) {
                    var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + allowedGroups[i] + '"]');

                    if (checkbox) {
                        checkbox.checked = true;
                    }

                    allowCookieGroup(allowedGroups[i]);
                }
            }
        }

        setTimeout(function () {
            cbConfig.initialState = getInitialStateOfConsents();
        }, 0);
    }

    function checkIfConfigIsFresh () {
        var lastConfigSave = localStorage.getItem('publii-gdpr-cookies-config-save-date');

        if (lastConfigSave === null) {
            return false;
        }

        lastConfigSave = parseInt(lastConfigSave, 10);

        if (lastConfigSave === 0) {
            return true;
        }

        if (+new Date() - lastConfigSave < cbConfig.configTTL * 24 * 60 * 60 * 1000) {
            return true;
        }

        return false;
    }

    function getDefaultConsentState (currentConfig, consentGroup) {
        let configGroups = currentConfig.split(',');

        for (let i = 0; i < configGroups.length; i++) {
            let groupName = configGroups[i];
            let group = window.publiiCBGCM.groups.find(group => group.cookieGroup === groupName);

            if (group && group[consentGroup]) {
                return 'granted';
            }
        }  
        
        if (window.publiiCBGCM.defaultState[consentGroup]) {
            return 'granted'; 
        }
        
        return 'denied';
    }

    function initBannerEvents () {
        cbUI.banner.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('banner');
            showBadge();
        }, false);

        if (cbUI.banner.btnReject) {
            cbUI.banner.btnReject.addEventListener('click', function (e) {
                e.preventDefault();
                rejectAllCookies();
                showBadge();
            }, false);
        }

        if (cbUI.banner.btnConfigure) {
            cbUI.banner.btnConfigure.addEventListener('click', function (e) {
                e.preventDefault();
                hideBanner();
                showAdvancedPopup();
                showBadge();
            }, false);
        }
    }

    function initPopupEvents () {
        if (!cbUI.popup.element) {
            return;
        }

        cbUI.overlay.addEventListener('click', function (e) {
            hideAdvancedPopup();
        }, false);

        cbUI.popup.element.addEventListener('click', function (e) {
            e.stopPropagation();
        }, false);

        cbUI.popup.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('popup');
        }, false);

        cbUI.popup.btnReject.addEventListener('click', function (e) {
            e.preventDefault();
            rejectAllCookies();
        }, false);

        cbUI.popup.btnSave.addEventListener('click', function (e) {
            e.preventDefault();
            saveConfiguration();
        }, false);

        cbUI.popup.btnClose.addEventListener('click', function (e) {
            e.preventDefault();
            hideAdvancedPopup();
        }, false);
    }

    function initBadgeEvents () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.addEventListener('click', function (e) {
            showBannerOrPopup();
        }, false);
    }

    initUI();
    initState();
    initBannerEvents();
    initPopupEvents();
    initBadgeEvents();

    /**
     * API
     */
    function addScript (src, inline) {
        var newScript = document.createElement('script');

        if (src) {
            newScript.setAttribute('src', src);
        }

        if (inline) {
            newScript.text = inline;
        }

        document.body.appendChild(newScript);
    }

    function allowCookieGroup (allowedGroup) {
        var scripts = document.querySelectorAll('script[type="gdpr-blocker/' + allowedGroup + '"]');
        cbConfig.previouslyAccepted.push(allowedGroup);
    
        for (var j = 0; j < scripts.length; j++) {
            addScript(scripts[j].src, scripts[j].text);
        }

        var groupEvent = new Event('publii-cookie-banner-unblock-' + allowedGroup);
        document.body.dispatchEvent(groupEvent);
        unlockEmbeds(allowedGroup);

        if (cbConfig.debugMode) {
            console.log('üç™ Allowed group: ' + allowedGroup);
        }

        if (window.publiiCBGCM && cbConfig.initialLsState.indexOf(allowedGroup) === -1) {
            let consentResult = {};
            let group = window.publiiCBGCM.groups.find(group => group.cookieGroup === allowedGroup);

            if (group) {
                let foundSomeConsents = false;

                Object.keys(group).forEach(key => {
                    if (key !== 'cookieGroup' && group[key] === true) {
                        consentResult[key] = 'granted';
                        foundSomeConsents = true;
                    }
                });

                if (foundSomeConsents) {
                    gtag('consent', 'update', consentResult);   

                    if (cbConfig.debugMode) {
                        console.log('üç™ GCMv2 UPDATE: ' + JSON.stringify(consentResult));
                    }
                }
            }
        }
    }

    function showBannerOrPopup () {
        if (cbUI.popup.element) {
            showAdvancedPopup();
        } else {
            showBanner();
        }
    }

    function showAdvancedPopup () {
        cbUI.popup.element.classList.add('is-visible');
        cbUI.overlay.classList.add('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'false');
        cbUI.overlay.setAttribute('aria-hidden', 'false');
    }

    function hideAdvancedPopup () {
        cbUI.popup.element.classList.remove('is-visible');
        cbUI.overlay.classList.remove('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'true');
        cbUI.overlay.setAttribute('aria-hidden', 'true');
    }

    function showBanner () {
        cbUI.banner.element.classList.add('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'false');
    }

    function hideBanner () {
        cbUI.banner.element.classList.remove('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'true');
    }

    function showBadge () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.classList.add('is-visible');
        cbUI.badge.setAttribute('aria-hidden', 'false');
    }

    function getConfigName () {
        var lsKeyName = 'publii-gdpr-allowed-cookies';

        if (cbConfig.revision) {
            lsKeyName = lsKeyName + '-v' + parseInt(cbConfig.revision, 10);
        }

        return lsKeyName;
    }

    function storeConfiguration (allowedGroups) {
        var lsKeyName = getConfigName();
        var dataToStore = allowedGroups.join(',');
        localStorage.setItem(lsKeyName, dataToStore);

        if (cbConfig.configTTL === 0) {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', 0);

            if (cbConfig.debugMode) {
                console.log('üç™ Store never expiring configuration');
            }
        } else {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', +new Date());
        }
    }

    function getInitialStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('üç™ Initial state: ' + groups.join(', '));
        }

        return groups;
    }

    function getCurrentStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('üç™ State to save: ' + groups.join(', '));
        }

        return groups;
    }

    function getAllGroups () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        return groups;
    }

    function acceptAllCookies (source) {
        var groupsToAccept = getAllGroups();
        storeConfiguration(groupsToAccept);

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('üç™ Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        if (cbUI.popup.element) {
            var checkboxesToCheck = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');

            for (var j = 0; j < checkboxesToCheck.length; j++) {
                checkboxesToCheck[j].checked = true;
            }
        }

        if (cbConfig.debugMode) {
            console.log('üç™ Accept all cookies: ', groupsToAccept.join(', '));
        }

        if (source === 'popup') {
            hideAdvancedPopup();
        } else if (source === 'banner') {
            hideBanner();
        }
    }

    function rejectAllCookies () {
        if (cbConfig.debugMode) {
            console.log('üç™ Reject all cookies');
        }

        storeConfiguration([]);
        setTimeout(function () {
            window.location.reload();
        }, 100);
    }

    function saveConfiguration () {
        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('üç™ Save new config: ', groupsToAccept.join(', '));
        }

        if (reloadIsNeeded(groupsToAccept)) {
            setTimeout(function () {
                window.location.reload();
            }, 100);
            return;
        }

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('üç™ Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        hideAdvancedPopup();
    }

    function reloadIsNeeded (groupsToAccept) {
        // check if user rejected consent for initial groups
        var initialGroups = cbConfig.initialState;
        var previouslyAcceptedGroups = cbConfig.previouslyAccepted;
        var groupsToCheck = initialGroups.concat(previouslyAcceptedGroups);

        for (var i = 0; i < groupsToCheck.length; i++) {
            var groupToCheck = groupsToCheck[i];

            if (groupToCheck !== '' && groupsToAccept.indexOf(groupToCheck) === -1) {
                if (cbConfig.debugMode) {
                    console.log('üç™ Reload is needed due lack of: ', groupToCheck);
                }

                return true;
            }
        }

        return false;
    }

    function unlockEmbeds (cookieGroup) {
        var iframesToUnlock = document.querySelectorAll('.pec-wrapper[data-consent-group-id="' + cookieGroup + '"]');

        for (var i = 0; i < iframesToUnlock.length; i++) {
            var iframeWrapper = iframesToUnlock[i];
            iframeWrapper.querySelector('.pec-overlay').classList.remove('is-active');
            iframeWrapper.querySelector('.pec-overlay').setAttribute('aria-hidden', 'true');
            var iframe = iframeWrapper.querySelector('iframe');
            iframe.setAttribute('src', iframe.getAttribute('data-consent-src'));
        }
    }

    win.publiiEmbedConsentGiven = function (cookieGroup) {
        // it will unlock embeds
        allowCookieGroup(cookieGroup);

        var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + cookieGroup + '"]');

        if (checkbox) {
            checkbox.checked = true;
        }

        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('üç™ Save new config: ', groupsToAccept.join(', '));
        }
    }
})(window);</script></body></html>